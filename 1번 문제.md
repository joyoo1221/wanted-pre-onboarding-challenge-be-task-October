### 1. 동시에 같은 `DB Table row`를 업데이트 하는 상황을 방어하기 위해 어떻게 개발하실 건지 설명해주세요.
</br>

- **`Lock`을 사용하자!**

락(Lock)이란, 여러 사용자들이 같은 데이터를 동시에 접근하는 상황에서, 데이터의 무결성과 일관성을 지키기 위해 데이터베이스에서 사용하는 것이다.

트랜잭션 처리의 순차성을 보장해주는 기능을 하기 때문에 동시 업데이트를 방어할 수 있다.

쉽게 설명하자면, 화장실에서 볼일을 볼 때 문을 잠그고, 볼일을 다 봤을 때 잠가뒀던 문을 열고 나오는 것처럼 데이터베이스도 작업사항이 있을 경우 문을 잠그는 것과 같은 행위라고 이해하면 된다.

</br>

- **공유 락(Shared Lock)**

`Read Lock`이라고도 불리며 데이터를 읽을 때(`select`)에 사용하는 락이다. 여러 사용자가 동시에 데이터를 읽어도 데이터의 일관성에는 아무런 영향을 주지 않기 때문에, 공유 락끼리는 동시에 접근이 가능하다.

- **베타 락(Exclusive Lock)**

데이터를 변경할 때(`insert`, `update`) 사용하는 락이다. 트랜잭션이 완료될 때까지 유지된다.

베타 락은 다른 세션이 해당 자원에 접근(ex) `select`, `insert`..) 하는 것을 막는다.

- **업데이트 락(Update Lock)**

데이터를 수정하기 위해 베타 락을 걸기 전, 데드 락을 방지하기 위해 사용하는 락이다.

일반적으로 업데이트 락은 `update`쿼리의 필터(`where`)가 실행되는 과정에서 적용된다.

</br>

- **`Lock`의 설정범위**
1. **데이터베이스**

전체 데이터베이스를 기준으로 Lock이 걸린다. 1개의 세션 만이 하나의 데이터베이스의 데이터에 접근이 가능하다. 때문에 DB 전체에 영향이 있는 DB 업데이트와 같은 작업에서만 사용한다.

2. **파일**

데이터베이스 파일*을 기준으로 Lock이 걸린다. 파일 전체를 백업할 때 쓴다.

*파일: 테이블, row등과 같은 실제 데이터가 쓰여지는 물리적인 저장소를 의미



3. **테이블**

테이블을 기준으로 Lock이 걸린다. 전체 테이블에 대한 데이터 변경이 있을 경우 사용한다.

DDL(create, alter, drop 등) 구문과 함께 사용되며 DDL Lock이라고도 한다.



4. **페이지와 블럭**

파일을 구성하는 페이지와 블록을 기준으로 Lock이 걸린다.



5. **컬럼(Column)**

컬럼을 기준으로 Lock이 걸리지만 Lock 설정 및 해제 시 리소스가 많이 들기 때문에 잘 사용하지 않는다. 지원하는 DBMS도 많지 않다.



6. **행(Row)**

1개의 행을 기준으로 Lock이 걸린다. DML에 대한 Lock으로 가장 기본으로 사용하는 Lock이다.
